<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Form Pendaftaran</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 400px; margin: auto; }
    input, button { display: block; width: 100%; margin-bottom: 1em; padding: 0.5em; }
  </style>
</head>
<body>
  <h2>Form Daftar</h2>
  <form action="/api/submit" method="POST">
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required />

    <label for="ref">Kode Referral:</label>
    <input type="text" id="ref" name="ref" />

    <button type="submit">Daftar</button>
  </form>

  <hr />
  <h3>Referral Stats</h3>
  <div id="stats">
    Loading...
  </div>

  <script>
  fetch('/api/submit')
    .then(res => res.json())
    .then(data => {
      const stats = (data.stats || []).map(item =>
        `<p><strong>${item.owner}</strong> (${item.referral}): ${item.count} referral(s)</p>`).join('');
      document.getElementById('stats').innerHTML = stats || 'Belum ada referral.';
    });
</script>

</body>
</html>
